# 코로나19 전, 후의 서울시 주요 서비스 업종 비교 분석 최종 보고서
## 프로젝트 주제
코로나19로 인해 많은 사람들의 일상이 크게 변화되었다. 사회 모습도 코로나19 이전과는 비교되는 모습을 가진다. 그 중에서도 서비스 업종에 큰 영향을 미쳤다는 것을 우리는 상권의 모습, 배달 앱의 큰 성장 등을 통해 확인할 수 있다. 그래서 정확한 데이터 수치를 이용하여 코로나19 이전에 어떤 업종이 주를 이뤘고 현재 어떻게 바뀌었는지, 어떤 업종이 주를 이루는지 등을 비교 분석하였다.
## 시스템 아키텍처
![image](https://user-images.githubusercontent.com/61917990/169749926-1a1493dc-f6f6-404f-9cde-436d5260ce1e.png)
## 데이터 수집
### 공공데이터
서울시 우리마을가게 상권분석서비스(상권-점포): 서울시 우리마을가게 상권분석 서비스(상권-점포)>데이터셋>공공데이터|서울열린데이터광장 
 http://data.seoul.go.kr/dataList/OA-15577/S/1/datasetView.do
서울시 코로나 19 확진자 현황: 서울시 코로나19 확진자 현황> 데이터셋> 공공데이터 | 서울열린데이터광장 (seoul.go.kr)
	http://data.seoul.go.kr/dataList/OA-20279/S/1/datasetView.do
### 네이버 블로그 내용
주요 상권의 직관적 수치 변화를 살펴보고자 공공데이터를 사용했다면, 실제 코로나 이전과 이후 사람들의 라이프 스타일이 어떻게 바뀌었는지 파악하고자 네이버 블로그 게시물을 크롤링하였다. 
-	크롤링 모듈
Python의 selenium을 사용하여 크롤러 모듈을 생성했다. 크롤러 모듈은 크게 세가지 부분으로 나뉜다. 첫 번째 게시글 작성 날짜를 크롤링할 때 포맷이 달라 발생하는 문제 해결을 위한 날짜 포맷 통일 함수, 두 번째 네이버 블로그 메인 페이지에서 키워드가 들어가며 기간 설정에 매칭되는 게시물 url을 가져오는 모듈, 마지막으로 가져온 url을 하나씩 방문하여 날짜 데이터와 게시글 내용을 가져오는 모듈로 구성된다. 
* 날짜 포맷 통일 함수

![image](https://user-images.githubusercontent.com/61917990/169750090-30ff69ab-843e-4d72-abf3-99617c6f16de.png)
* 게시물 url 가져오는 모듈

![image](https://user-images.githubusercontent.com/61917990/169750100-5640eb9e-d2c9-457e-b3a8-5cd417334e1c.png)
Text 변수에 검색할 키워드를, start와 end변수에는 수집할 게시글 들의 업로드 날짜를 설정하였다. 페이지 수를 573까지 한 이유는 네이버 블로그는 572페이지까지만 게시글들이 나오기 때문이다. 그 이상으로 넘어가면 한 게시물이 반복적으로 나오는 현상이 일어난다.

* 날짜 데이터와 게시글 내용을 가져오는 모듈

![image](https://user-images.githubusercontent.com/61917990/169750185-5fe5a8a9-80f9-44a8-a8ba-9a1986612553.png)
![image](https://user-images.githubusercontent.com/61917990/169750202-03ca421d-ea01-4e7b-952f-bf8f21ad0c75.png)

- 크롤링 결과

![image](https://user-images.githubusercontent.com/61917990/169750253-c80eca8f-596b-4b6d-b849-c9659acd2b95.png)

## 데이터 분석
### 공공데이터-확진자 누적 그래프
* 데이터 불러오기 & 전처리

![image](https://user-images.githubusercontent.com/61917990/169750346-ed9fc499-1516-4e7c-a7fd-d534804f435b.png)

분석을 원하는 년도는 20년도 이기 때문에 이 후 데이터는 지워주었으며 역순으로 데이터를 정렬하였다.
* 시각화

![image](https://user-images.githubusercontent.com/61917990/169750361-98d241bd-0964-4900-a1fb-83ef88accced.png)

위의 시각화 결과를 통해 3월, 8월, 11월 후반부터 12월까지 확진자가 급증하는 양상을 확인해볼 수 있다.

### 공공데이터-상권 분석
서울시에서 제공하는 서울시 우리마을가게 상권분석 서비스 엑셀 파일을 통하여 코로나 이전인 2019년도의 주요 상권과 코로나 이후인 2020년은 4분기로 나누어 각 분기별 주요 상권을 비교해 보았다. 데이터 시각화를 위하여 Zeppelin에서 spark를 사용하였다.
* 데이터 불러오기

![image](https://user-images.githubusercontent.com/61917990/169750456-1fdf4e32-b3ba-416e-8d42-6ba60855e744.png)

* 데이터 전처리

![image](https://user-images.githubusercontent.com/61917990/169750470-83a810a6-4c0f-4f48-84fb-3486f1d4d9e1.png)
![image](https://user-images.githubusercontent.com/61917990/169750484-440ed142-8108-4a2d-8992-d708cca49e76.png)

분석에 필요 없는 column들을 삭제한 후 사용의 편의성을 위하여 모든 컬럼들의 이름을 영어로 바꾸었다.
분석에 필요한 컬럼은 서비스 업종, 현재 점포 수, 개업 점포 수, 개업 율, 폐업 율, 폐업 점포 수 들이다. 2020년도 데이터는 분기별로 나누어서 분석해야 하기 때문에 기준 분기 코드 컬럼도 분석에 사용하였다.
* 데이터 분석과 결과

![image](https://user-images.githubusercontent.com/61917990/169750547-504199ee-f284-49c6-850c-d231dcbb19dc.png)

Spark sql을 통하여 2019년도 서울시 업종 데이터를 query하였다. 위의 sql문을 통해 도출된 결과는 2019년 서울시에 자리 잡은 업종 순위이다. 위와 같은 방식으로 2020년도 분기별로 서울시 자리 잡은 업종의 순위를 분석하였다.

![image](https://user-images.githubusercontent.com/61917990/169750736-487c14a4-64aa-4dc7-bafb-d6819a6f0666.png)

주요 업종과 더불어 개업한 업종의 순위를 알아보았다. 이도 똑같이 2020년을 분기별로 분석하였다.

![image](https://user-images.githubusercontent.com/61917990/169750766-27e56b41-a4cd-4fa5-ad67-c4a7ac1e491d.png)

다음으로는 평균 폐업 율 순위를 분석하였다.

* 분석 결과(주요 상권 순위)

![image](https://user-images.githubusercontent.com/61917990/169751514-27367115-72bd-40c9-925c-963b6f61f2b6.png)

왼쪽: 2019 주요 업종, 오른쪽: 2020 4분기 주요 업종
주요 업종 데이터에서는 분기별로 큰 차이가 없었기에 가장 차이가 명확한 19년도 데이터와 20년도 4분기 데이터를 비교했다. 주목할 부분은 코로나의 타격으로 인해 노래방 상권이 19년도에 비해 20년도에 굉장히 약해진 것을 확인할 수 있다. 뿐만 아니라 일반 교습학원은 20년도 순위권에서 사라진 것을 확인할 수 있다. 그에 반해 육류판매 업종은 20년도에 순위권에 올라온 것을 확인할 수 있다.  

* 분석 결과(개업한 업종 순위)

![image](https://user-images.githubusercontent.com/61917990/169751481-c5c7dbe2-23f6-4cdd-991c-a7f5c2115533.png)

왼쪽: 2019 개업한 업종 상위, 오른쪽: 2020 4분기 개업한 업종 상위
큰 차이는 없었지만 코로나로 인해 호프, 간이주점의 개업 수가 줄어든 것을 확인할 수 있으며 스포츠 강습 업종은 순위 권 밖으로 밀려났다.

* 분석 결과(평균 폐업 율 순위)

![image](https://user-images.githubusercontent.com/61917990/169751608-c2fbfbee-53c9-4429-a7d9-ce457adc5fff.png)

왼쪽: 2019 폐업 율 상위, 오른쪽: 2020 4분기 폐업 율 상위
코로나의 가장 큰 피해를 받은 여행과 관련된 산업들의 폐업 율이 높은 것을 확인할 수 있다. 게스트 하우스, 여관, 여행사와 같은 업종들이 19년도에 보이지 않다가 20년도 4분기에 순위권에 올라온 것을 확인할 수 있다. 뿐만 아니라 한식 음식점 또한 영향을 받아 폐업 율 1순위를 차지하게 되었다. 의류판매 업종도 폐업 율이 굉장히 높은 것을 볼 수 있는데, 코로나로 인해 오프라인보다 온라인 구매를 선호하는 사람들이 많아진 결과라고 생각한다.

### 네이버 블로그 게시글
* 데이터 불러오기

![image](https://user-images.githubusercontent.com/61917990/169751756-be9fae7c-cdb7-475a-bc95-d334837f5686.png)

크롤링으로 수집한 데이터를 불러왔다.

* 데이터 전처리

![image](https://user-images.githubusercontent.com/61917990/169751788-f8da216f-7045-40f6-9355-7bc13d958bb8.png)
![image](https://user-images.githubusercontent.com/61917990/169751799-35072ad7-6ac5-4155-9b27-a3cfd8f35686.png)

크롤링의 오류로 인해 중간에 끊긴 데이터들은 하나의 달을 대표할 수 있도록 데이터를 묶어주었다.

![image](https://user-images.githubusercontent.com/61917990/169751821-096e8ba1-1cbc-4a25-9d2c-89bfbd45f3de.png)

결측치가 들어있는 행은 dropna함수를 통해 삭제하였다

* 데이터 분석과 결과

![image](https://user-images.githubusercontent.com/61917990/169751859-f5c22736-b5df-4143-a505-1eb2321f3321.png)

데이터 분석을 위한 모듈을 생성하였다. Analysis 모듈은 파일 이름을 인자로 받으면 해당 파일의 모든 형태소를 추출한 후 명사 값만 전달하는 모듈이다. Noun_list 모듈은 앞의 analysis의 리턴 값을 인자로 받게 되며 명사만 추출된 값을 받아 빈도수를 체크하여 상위 70개의 명사를 추출해준다. 이때 if문으로 결과와 상관없는, 결과에 영향을 미치지 못하는 “것”, “이”, “전”과 같은 몇몇의 명사들은 결과에서 걸러지게 하였다. 

![image](https://user-images.githubusercontent.com/61917990/169751881-c7c91f4a-bd95-4dac-b423-bee263e15620.png)

해당 모듈을 월별로 돌려본 모습이다.

* 데이터 분석 결과

코로나 이전과 이후는 사람들의 라이프 스타일에 있어서 분명한 차이가 존재한다. 그러나 코로나 이후의 결과는 명확한 차이점이 두드러지지 않았기에 앞서 확인한 확진자가 급증하던 시기, 3월, 8월, 12월의 분석 결과와 코로나 이전 분석 결과를 비교할 것이다.

- 코로나 이전(2019년)

![image](https://user-images.githubusercontent.com/61917990/169751996-b519327b-d388-4df1-be94-d3ff189a8e3e.png)

코로나 이후의 데이터와 상반될 것 같은 단어들에 하이라이트를 쳤다. 단어 상위권을 보면 맛집, 여행, 공원, 나들이, 방문, 데이트와 같은 현재는 쉽게 즐길 수 없는 오프라인 활동들이 주를 이루고 있다.
- 코로나 이후(2020년 3월)

![image](https://user-images.githubusercontent.com/61917990/169752037-dec49b04-4eea-40d1-af73-e15dbd6c53eb.png)

코로나 이전과 대비하여 코로나 이후에 새롭게 순위권에 등장한 주요 단어들이 있다. 사람, 집, 때문, 코로나, 공간 등의 단어들이다. 특히 ‘사람’키워드는 세 번째로 빈번하게 등장한 단어이다. 거리두기로 인해 사람들과 단절되고 소통의 부재가 생긴 탓이 아닐까 생각한다.
또 코로나 이전과 대비하여 순위가 많이 낮아진 단어도 있다. ‘맛집’ 키워드이다. 이전에는 굉장히 많은 빈도수로 게시글을 채웠으나 코로나 이후에는 현저히 낮아진 빈도를 확인할 수 있다.

- 코로나 이후(2020년 8월)

![image](https://user-images.githubusercontent.com/61917990/169752097-6749ca7b-c670-4d57-a88f-e6da3f46de56.png)

3월데이터와 마찬가지로 여전히 ‘사람’, ‘때문’, ‘공간’과 같은 단어들이 순위권에 남아있다. 재밌었던 키워드는 바로 ‘생각’이다. 이 키워드는 코로나 이전 데이터의 순위 밖이었으나 해당 데이터에는 높은 빈도수를 보여준다. 외부활동이 자제되었기에 집에 있는 시간이 늘어나고 그에 따라 생각할 시간이 많아진 사회 모습을 반영하는 것 같다. ‘맛집’ 키워드는 이전 데이터보다 더 빈도수가 줄어들었다. 

- 코로나 이후(2020년 12월)

![image](https://user-images.githubusercontent.com/61917990/169752140-753b23ba-70b2-4716-b1b0-64f257e877b5.png)

‘생각’이라는 키워드가 ‘서울’키워드를 제외하고 가장 많은 빈도수를 보여준다. 이 키워드야 말로 사람들의 생활을 바로 투영할 수 있는 대표적인 단어라고 생각한다. 

## 비교분석 결론
### 서울시 주요 업종 변화
프로젝트를 시작하며 예상했던 결론과 크게 다르지 않았다. 가장 직격탄을 맞은 업종은 청소년 교습학원, 음식점, 노래방 등이 있었으며 여행과 관련된 산업의 폐업 율이 굉장히 높았다. 이에 반해 육류 판매점, 반찬 판매점 등 집에서 즐길 수 있는 소재를 마련한 업종은 반대로 입지가 상승하였다.
### 사람들의 라이프 스타일 변화
코로나 이전에는 사람들이 주로 야외활동, 오프라인 활동을 즐겼다면 코로나 이후로 집에서 활동하며 어떠한 공간을 원하게 된 것을 알 수 있다. 가장 재밌었던 결과는 이로 인해 사람들이 ‘생각’을 할 시간이 많이 늘었다는 것이다.
